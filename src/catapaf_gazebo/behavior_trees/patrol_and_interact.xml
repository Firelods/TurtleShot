<root BTCPP_format="4">
    <BehaviorTree ID="MainTree">
        <Sequence>
             <RetryUntilSuccessful num_attempts="-1">
                <DetectHumanWithBall output_pose="{human_pose}" is_detected="{human_found}"/>
             </RetryUntilSuccessful>
             
             <StopRobot/>
             <Wait duration="2"/>

             <GoToPose target="{human_pose}"/>
             
             <Wait duration="30"/>
        </Sequence>
    </BehaviorTree>

    <!-- Definition of custom nodes for Groot2 visualization -->
    <TreeNodesModel>
        <Action ID="DetectTrashCan">
            <output_port name="output_pose">Pose of the detected trashcan</output_port>
            <output_port name="is_detected">Boolean flag if detected</output_port>
        </Action>
        <Action ID="DetectHumanWithBall">
            <output_port name="output_pose">Pose of the human with ball</output_port>
            <output_port name="is_detected">Boolean flag if detected</output_port>
        </Action>
        <Action ID="GoToPose">
            <input_port name="target">Target 3D Pose</input_port>
        </Action>
        <Action ID="StopRobot"/>
        <Action ID="Wait">
            <input_port name="duration">Duration in seconds</input_port>
        </Action>
        <Action ID="GetPatrolPoint">
            <output_port name="output_pose">Next patrol waypoint pose</output_port>
        </Action>
        <Action ID="RandomWalk"/>
    </TreeNodesModel>
</root>
